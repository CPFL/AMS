{
  "initial_state": "Start\n",
  "variables": {
    "kvs_client": {},
    "target_autoware": null,
    "target_vehicle": null,
    "STATE_CMD_ENGAGE": {"data": "engage"},
    "STATE_CMD_NONE": null
  },
  "transitions": [
    {
      "event": null,
      "from": "Start\n",
      "to": "AnyVehicleState\nWaitAnyVehicleState\nAnyDriveState\n",
      "hooks": null,
      "conditions": null
    },
    {
      "event": null,
      "from": "AnyVehicleState\nWaitAnyVehicleState\nAnyDriveState\n",
      "to": "AnyVehicleState\nWaitOrder\nAnyDriveState\n",
      "hooks": null,
      "conditions": null
    },
    {
      "event": null,
      "from": "AnyVehicleState\nWaitOrder\nAnyDriveState\n",
      "to": "AnyVehicleState\nMissionCheck\nAnyDriveState\n",
      "hooks": null,
      "conditions": [
        {
          "function": "received_lane_array_exists",
          "args": ["kvs_client", "target_autoware"]
        }
      ]
    },
    {
      "event": null,
      "from": "AnyVehicleState\nMissionCheck\nAnyDriveState\n",
      "to": "AnyVehicleState\nDriveReady-1\nAnyDriveState\n",
      "hooks": [
        {
          "function": "initialize_vehicle_location",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "update_lane_array",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "vehicle_location_initialized",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "lane_array_updated",
          "args": ["kvs_client", "target_autoware"]
        }
      ]
    },
    {
      "event": null,
      "from": "AnyVehicleState\nDriveReady-1\nAnyDriveState\n",
      "to": "AnyVehicleState\nDriveReady\nAnyDriveState\n",
      "hooks": [
        {
          "function": "update_current_pose",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": null
    },
    {
      "event": "engage",
      "from": "AnyVehicleState\nDriveReady\nAnyDriveState\n",
      "to": "AnyVehicleState\nDriving-1\nAnyDriveState\n",
      "hooks": [
        {
          "function": "initialize_state_cmd",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "state_cmd_is_expected",
          "args": ["kvs_client", "target_autoware", "STATE_CMD_NONE"]
        }
      ]
    },
    {
      "event": null,
      "from": "AnyVehicleState\nDriving-1\nAnyDriveState\n",
      "to": "AnyVehicleState\nDriving\nAnyDriveState\n",
      "hooks": null,
      "conditions": null
    },
    {
      "event": "mission_canceled",
      "from": "AnyVehicleState\nDriveReady\nAnyDriveState\n",
      "to": "AnyVehicleState\nMissionAborted\nAnyDriveState\n",
      "hooks": null,
      "conditions": null
    },
    {
      "event": null,
      "from": "AnyVehicleState\nDriving\nAnyDriveState\n",
      "to": "AnyVehicleState\nMissionComplete\nAnyDriveState\n",
      "hooks": [
        {
          "function": "update_vehicle_location",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "update_current_pose",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "vehicle_location_is_end_point",
          "args": ["kvs_client", "target_autoware"]
        }
      ]
    },
    {
      "event": "request_mission_change",
      "from": "AnyVehicleState\nDriving\nAnyDriveState\n",
      "to": "AnyVehicleState\nDrivingMissionChange\nAnyDriveState\n",
      "hooks": [
        {
          "function": "update_vehicle_location",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "update_current_pose",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "initialize_state_cmd",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "initialize_received_lane_array",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "state_cmd_is_expected",
          "args": ["kvs_client", "target_autoware", "STATE_CMD_NONE"]
        },
        {
          "function": "received_lane_array_initialized",
          "args": ["kvs_client", "target_autoware"]
        }
      ]
    },
    {
      "event": null,
      "from": "AnyVehicleState\nDrivingMissionChange\nAnyDriveState\n",
      "to": "AnyVehicleState\nMissionChangeSucceeded\nAnyDriveState\n",
      "hooks": [
        {
          "function": "update_vehicle_location",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "update_current_pose",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "update_lane_array",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "lane_array_updated",
          "args": ["kvs_client", "target_autoware"]
        }
      ]
    },
    {
      "event": "return_to_driving",
      "from": "AnyVehicleState\nMissionChangeSucceeded\nAnyDriveState\n",
      "to": "AnyVehicleState\nDriving\nAnyDriveState\n",
      "hooks": [
        {
          "function": "update_vehicle_location",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "update_current_pose",
          "args": ["kvs_client", "target_autoware"]
        },
        {
          "function": "initialize_state_cmd",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "state_cmd_is_expected",
          "args": ["kvs_client", "target_autoware", "STATE_CMD_NONE"]
        }
      ]
    },
    {
      "event": "goto_wait_order",
      "from": "AnyVehicleState\nMissionAborted\nAnyDriveState\n",
      "to": "AnyVehicleState\nWaitOrder-1\nAnyDriveState\n",
      "hooks": [
        {
          "function": "initialize_state_cmd",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "state_cmd_is_expected",
          "args": ["kvs_client", "target_autoware", "STATE_CMD_NONE"]
        }
      ]
    },
    {
      "event": "goto_wait_order",
      "from": "AnyVehicleState\nMissionComplete\nAnyDriveState\n",
      "to": "AnyVehicleState\nWaitOrder-1\nAnyDriveState\n",
      "hooks": [
        {
          "function": "initialize_state_cmd",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "state_cmd_is_expected",
          "args": ["kvs_client", "target_autoware", "STATE_CMD_NONE"]
        }
      ]
    },
    {
      "event": null,
      "from": "AnyVehicleState\nWaitOrder-1\nAnyDriveState\n",
      "to": "AnyVehicleState\nWaitOrder\nAnyDriveState\n",
      "hooks": [
        {
          "function": "initialize_lane_array",
          "args": ["kvs_client", "target_autoware"]
        }
      ],
      "conditions": [
        {
          "function": "lane_array_initialized",
          "args": ["kvs_client", "target_autoware"]
        }
      ]
    }
  ]
}